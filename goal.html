<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MedVistaar - Goal Setting & Streak</title>
<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg, #6a11cb, #2575fc);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    padding: 20px;
    min-height: 100vh;
    color: #fff;
  }

  .container {
    background: rgba(255,255,255,0.95);
    color: #000;
    padding: 25px;
    border-radius: 20px;
    width: 100%;
    max-width: 500px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
  }

  h2 {
    text-align: center;
    margin-bottom: 20px;
    color: #c0392b;
  }

  select, button {
    width: 100%;
    padding: 12px;
    margin: 10px 0;
    font-size: 16px;
    border-radius: 10px;
    border: 1px solid #ccc;
  }

  .task {
    display: flex;
    align-items: center;
    margin: 10px 0;
    padding: 10px;
    background: #f1f1f1;
    border-radius: 12px;
  }

  .task input[type="checkbox"] {
    margin-right: 15px;
    transform: scale(1.5);
  }

  .streak {
    text-align: center;
    font-size: 20px;
    margin: 15px 0;
  }

  .badge {
    text-align: center;
    font-size: 18px;
    margin: 10px 0;
    color: green;
  }

  .completed {
    text-decoration: line-through;
    color: gray;
  }

  @media(max-width:480px){
    h2 { font-size: 1.6rem; }
    .task { font-size: 14px; }
  }
</style>
</head>
<body>

<div class="container">
  <h2>Set Your Health Goal</h2>

  <select id="goalSelect">
    <option value="">-- Select Goal --</option>
    <option value="diabetes">Control Diabetes</option>
    <option value="weight">Reduce Weight</option>
    <option value="fitness">Maintain Fitness</option>
    <option value="sleep">Improve Sleep/Stress</option>
    <option value="medicine">Medicine Adherence</option>
  </select>

  <button onclick="startGoal()">Start Goal</button>

  <div id="tasksContainer"></div>

  <div class="streak">üî• Streak: <span id="streakCount">0</span> days</div>
  <div class="badge" id="badge"></div>
</div>

<script>
let streak = parseInt(localStorage.getItem("streak") || "0");
let tasks = [];
const taskLists = {
  diabetes: ["Check blood sugar", "Walk 30 minutes", "Take medicine"],
  weight: ["Eat balanced diet", "Drink 2L water", "Exercise 30 min"],
  fitness: ["Morning run 20 min", "Evening stretching", "Track calories"],
  sleep: ["Sleep 7-8 hrs", "Meditate 10 min", "Avoid screens 1 hr before bed"],
  medicine: ["Take pills on time", "Refill medicines", "Track side effects"]
};

document.getElementById("streakCount").innerText = streak;

function startGoal() {
  const goal = document.getElementById("goalSelect").value;
  if(!goal) { alert("Please select a goal"); return; }
  tasks = taskLists[goal].map(task => ({name: task, done: false}));
  renderTasks();
}

function renderTasks() {
  const container = document.getElementById("tasksContainer");
  container.innerHTML = "";
  tasks.forEach((task, idx) => {
    const div = document.createElement("div");
    div.className = "task";
    div.innerHTML = `<input type="checkbox" id="task${idx}" ${task.done ? "checked" : ""} onchange="toggleTask(${idx})">
                     <label for="task${idx}" class="${task.done ? "completed" : ""}">${task.name}</label>`;
    container.appendChild(div);
  });
}

function toggleTask(idx) {
  tasks[idx].done = !tasks[idx].done;
  renderTasks();

  if(tasks.every(t => t.done)) {
    streak++;
    localStorage.setItem("streak", streak);
    document.getElementById("streakCount").innerText = streak;
    showBadge();
    // Reset tasks for next day/week if needed
    tasks.forEach(t => t.done = false);
    renderTasks();
  }
}

function showBadge() {
  const badgeDiv = document.getElementById("badge");
  if(streak === 7) badgeDiv.innerText = "üéâ 7-day streak! Badge earned!";
  else if(streak === 30) badgeDiv.innerText = "üèÜ 30-day streak! Badge earned!";
  else badgeDiv.innerText = "";
}

</script>
</body>
</html>
